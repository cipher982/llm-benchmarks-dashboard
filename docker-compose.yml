services:
  llm-bench-backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "${BACKEND_PORT}:5000"
    environment:
      - MONGODB_URI=${MONGODB_URI}
      - PORT=5000
      - NODE_ENV=production
      - REDIS_HOST=${REDIS_HOST}
      - REDIS_PORT=${REDIS_PORT}
      - REDIS_PASSWORD=${REDIS_PASSWORD}
      - REDIS_DB=${REDIS_DB}
    networks:
      - llm-bench-network

  # Frontend service - commented out for now, will be added later
  # frontend:
  #   build:
  #     context: ./frontend
  #     dockerfile: Dockerfile
  #   restart: unless-stopped
  #   expose:
  #     - 3000
  #   environment:
  #     - REACT_APP_API_URL=http://backend:5000
  #   depends_on:
  #     - backend
  #   networks:
  #     - llm-bench-network

networks:
  llm-bench-network:
    driver: bridge